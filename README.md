# Task Kaspi

## –û–ø–∏—Å–∞–Ω–∏–µ
Task Kaspi - —ç—Ç–æ REST API —Å–µ—Ä–≤–∏—Å –Ω–∞ Go, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã. –ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º—ã –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ (Rate Limiting).

## –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- **–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è:** Go
- **–§—Ä–µ–π–º–≤–æ—Ä–∫:** Gin
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL
- **–ö—ç—à:** Redis
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** Logrus
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** Swagger

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–æ–¥—Ö–æ–¥
–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö **—á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –ß–µ—Ç–∫–æ —Ä–∞–∑–¥–µ–ª—è—Ç—å —É—Ä–æ–≤–Ω–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (handler, service, repository).
- –£–ª—É—á—à–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å –∫–æ–¥–∞.
- –û–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å –≥–∏–±–∫–æ—Å—Ç—å –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
/task-kaspi
‚îÇ‚îÄ‚îÄ cmd/
‚îÇ   ‚îú‚îÄ‚îÄ server/
‚îÇ       ‚îú‚îÄ‚îÄ main.go      # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ handler/        # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã API
‚îÇ   ‚îú‚îÄ‚îÄ service/        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ repository/     # –†–∞–±–æ—Ç–∞ —Å –ë–î
‚îÇ‚îÄ‚îÄ pkg/
‚îÇ   ‚îú‚îÄ‚îÄ database/       # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ‚îÄ‚îÄ docs/               # Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ‚îÄ‚îÄ go.mod              # –ú–æ–¥—É–ª–∏ Go
‚îÇ‚îÄ‚îÄ go.sum              # –•–µ—à–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫
### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```sh
git clone https://github.com/ddProgerGo/task-kaspi.git
cd task-kaspi
```
### 2. –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ PostgreSQL –∏ Redis (docker-compose)
```sh
docker-compose up -d
```
### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```sh
go run cmd/server/main.go
```

## API
### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ª—é–¥–µ–π –ø–æ –∏–º–µ–Ω–∏ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
**GET /people/info/phone/{name}?page=1&limit=10**
```json
Response:
{
    "data": [
        { "name": "John Doe", "iin": "123456789012", "phone": "+77011234567" }
    ],
    "page": 1,
    "limit": 10,
    "total": 50
}
```
### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ò–ò–ù
**GET /iin_check/{iin}**
```json
Response:
{ "valid": true }
```
### 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞
**POST /people/info**
```json
Request:
{
    "name": "John Doe",
    "iin": "123456789012",
    "phone": "+77011234567"
}
```
### 4. –ü–æ–ª—É—á–µ–Ω–∏–µ —á–µ–ª–æ–≤–µ–∫–∞ –ø–æ –ò–ò–ù
**GET /people/info/iin/{iin}**
```json
Response:
{ "name": "John Doe", "iin": "123456789012", "phone": "+77011234567" }
```

## –î–æ—Å—Ç—É–ø –∫ Swagger UI
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É: ``` http://localhost:8080/swagger/index.html ```

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è SQL-–∑–∞–ø—Ä–æ—Å–æ–≤
–í —Ç–∞–±–ª–∏—Ü–µ **people** –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞:
```sql
CREATE INDEX idx_people_name ON people(name);
CREATE INDEX idx_people_iin ON people(iin);
```
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- **idx_people_name** —É—Å–∫–æ—Ä—è–µ—Ç –ø–æ–∏—Å–∫ –ø–æ `name ILIKE '%value%'`.
- **idx_people_iin** —É—Å–∫–æ—Ä—è–µ—Ç –ø–æ–∏—Å–∫ –ø–æ `iin`.

## –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Redis –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –ª—é–¥—è—Ö.
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ –µ–≥–æ –ò–ò–ù —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ –∫–µ—à–∞, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

## –í–∞–ª–∏–¥–∞—Ü–∏—è –ò–ò–ù
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ò–ò–ù —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–ª–≥–æ—Ä–∏—Ç–º–∞, –æ–ø–∏—Å–∞–Ω–Ω–æ–≥–æ –≤ [Wikipedia](https://ru.wikipedia.org/wiki/%D0%98%D0%BD%D0%B4%D0%B8%D0%B2%D0%B8%D0%B4%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D0%B8%D0%B4%D0%B5%D0%BD%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D1%8B%D0%B9_%D0%BD%D0%BE%D0%BC%D0%B5%D1%80):

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø—ã —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –ë–î –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞ —Å—á–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è. üöÄ

